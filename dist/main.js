(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){e.classList.add("modal_opened"),e.addEventListener("mousedown",i),document.addEventListener("keydown",o)}function r(e){e.classList.remove("modal_opened"),e.removeEventListener("mousedown",i),document.removeEventListener("keydown",o)}function i(e){e.target.classList.contains("modal")&&r(e.target)}function o(e){"Escape"===e.key&&r(document.querySelector(".modal_opened"))}e.d({},{vV:()=>g,RQ:()=>C,uU:()=>q});const n=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t}_isInvalidInput(e){return!e.validity.valid}_showError(e){const t=this._formEl.querySelector(`#${e.id}`);t.classList.add(this._errorClass),t.textContent=e.validationMessage,e.classList.add(this._inputErrorClass)}_hideError(e){const t=this._formEl.querySelector(`#${e.id}`);t.classList.remove(this._errorClass),t.textContent=" ",e.classList.remove(this._inputErrorClass)}_toggleButton(){this._inputList.some(this._isInvalidInput)?(this._buttonEl.disabled=!0,this._buttonEl.classList.add(this._inactiveButtonClass)):(this._buttonEl.disabled=!1,this._buttonEl.classList.remove(this._inactiveButtonClass))}_checkInputValidity(e){const t=this._formEl.querySelector(`#${e.id}-error`);this._isInvalidInput(e)?this._showError(t):this._hideError(t)}_setEventListeners(){this._inputList=Array.from(this._formEl.querySelectorAll(this._inputSelector)),this._buttonEl=this._formEl.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButton()}))}))}resetForm(){this._formEl.reset(),this._toggleButton()}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}},s=document.querySelector("#list-title"),l=document.querySelector("#list-subtitle"),a=document.querySelector(".profile__title"),u=document.querySelector(".profile__subtitle"),c=document.querySelector(".profile__edit-button"),d=document.querySelector("#close-profile-popup"),_=document.querySelector("#close-card-popup"),m=document.querySelector("#close-image-popup"),p=document.querySelector(".profile__plus-button"),h=(document.querySelector("#create-card-button"),document.querySelector("#edit-profile-popup")),v=document.querySelector("#add-card-popup"),y=document.querySelector("#card-template"),E=document.querySelector(".elements-grid__cards"),f=(document.querySelector("#active-like-button"),document.querySelector("#edit-profile-popup")),S=document.querySelector("#add-card-popup"),L=document.querySelector("#card-title"),b=document.querySelector("#card-url"),g=document.querySelector("#image-popup"),q=g.querySelector(".modal__popup-image"),C=g.querySelector(".modal__popup-caption");function k(e){var r;r=new class{constructor(e,t){this._template=e,this._data=t,this._title=t.title,this._url=t.url,this._element=null}_getElement=()=>this._template.content.querySelector(".elements-grid__card").cloneNode(!0);_handleCardPreview=()=>{q.src=this._url,C.textContent=this._title,q.alt=this._data.alt,t(g)};_handleLikeIcon=()=>{this._cardLikeButton.classList.toggle("elements-grid__icon-active")};_handleDeleteCard=()=>{this._element.remove()};_setEventListeners=()=>{this._cardLikeButton.addEventListener("click",(e=>{this._handleLikeIcon(e)})),this._deleteCard.addEventListener("click",(e=>{this._handleDeleteCard(e)})),this._imageElement.addEventListener("click",(e=>{this._handleCardPreview(e)}))};render=()=>(this._element=this._getElement(),this._imageElement=this._element.querySelector(".elements-grid__image"),this._titleElement=this._element.querySelector(".elements-grid__text"),this._imageElement.src=this._url,this._imageElement.alt=this._url,this._titleElement.textContent=this._title,this._deleteCard=this._element.querySelector(".elements-grid__delete-button"),this._cardLikeButton=this._element.querySelector(".elements-grid__icon"),this._setEventListeners(),this._element)}(y,e).render(e),E.prepend(r)}f.addEventListener("submit",(function(e){const t=document.querySelector("#edit-profile-popup");e.preventDefault(),a.textContent=s.value,u.textContent=l.value,r(t)})),c.addEventListener("click",(()=>{var e;e=h,s.value=a.textContent,l.value=u.textContent,t(e)})),S.addEventListener("submit",(function(e){e.preventDefault(),k({title:L.value,url:b.value}),I.resetForm(),j.resetForm(),r(v)})),p.addEventListener("click",(()=>{t(v)})),d.addEventListener("click",(()=>r(h))),_.addEventListener("click",(()=>r(v))),m.addEventListener("click",(()=>r(g))),[{title:"Lake & Mountain",url:"https://images.unsplash.com/photo-1638802422633-694088680359?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{title:"Lake Louise",url:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{title:"Bald Mountains",url:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{title:"Latemar",url:"https://code.s3.yandex.net/web-code/latemar.jpg"},{title:"Vanoise National Park",url:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{title:"Lago di braies",url:"https://code.s3.yandex.net/web-code/lago.jpg"}].forEach(k);const w=S.querySelector(".form-name"),x=f.querySelector(".form-name"),B={inputSelector:".form-name__input",submitButtonSelector:".form-name__save-button",inactiveButtonClass:"form-name__save-button_disabled",inputErrorClass:"form-name__modal-type_error",errorClass:"modal__popup__error_visible"},I=new n(B,w);I.enableValidation(".form-name");const j=new n(B,x);j.enableValidation(".form-name")})();